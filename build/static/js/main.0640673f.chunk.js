(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{18:function(e,t,a){e.exports=a(33)},23:function(e,t,a){},25:function(e,t,a){},29:function(e,t,a){},33:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),o=a(4),l=a.n(o),c=(a(23),a(6)),s=a(5),d=a(7),i=a(8),m=a(10),u=a(9),h=a(11),p=(a(25),a(3)),g=function(e){var t=e.state,a=e.listManageMethods;return 0===t.list.length?r.a.createElement("h2",null,"Database empty! Add your first record!"):r.a.createElement(r.a.Fragment,null,r.a.createElement(p.i,{style:{textAlign:"left"}},t.list.map(function(e){return r.a.createElement(p.j,{className:"justify-content-between ",style:e!==t.recStore?{backgroundColor:"white"}:{backgroundColor:"#f8f8f8"},key:e},r.a.createElement("span",{style:{textTransform:"uppercase"}},"entry no. ",e),r.a.createElement(p.c,{size:"sm",style:{float:"right"}},r.a.createElement(p.b,{color:"primary",onClick:function(t){return a(t,e)}},"Read"),r.a.createElement(p.b,{color:"primary",style:{backgroundColor:"#1ea3eb"},onClick:function(t){return a(t,e)}},"Update"),r.a.createElement(p.b,{color:"dark",onClick:function(t){return a(t,e)}},"Delete")))})))},E=function(){return r.a.createElement("header",{className:"fixed-top border-bottom border-white bg-primary text-white",style:{padding:"15px"}},r.a.createElement("p",{className:"lead font-weight-bold"},"SKYGATE challenge"),r.a.createElement("p",null,"CRUD form manager integrated with IndexedDB"))},f=function(e){var t=e.state,a=e.showForm;return 0===t.addNewVis?null:r.a.createElement("div",null,r.a.createElement(p.b,{color:"primary",type:"button",style:{margin:"20px"},onClick:function(){return a("add")}},"Add New Record"))},b=(a(29),function(e){var t=e.state,a=e.setInput;return parseInt(t.wheels)>4?r.a.createElement(r.a.Fragment,null,r.a.createElement(p.h,null,"Is your Ford road legal?"),r.a.createElement(p.f,{className:"mgr",check:!0},r.a.createElement(p.h,{check:!0},r.a.createElement(p.g,{onChange:a,type:"radio",value:"yes",checked:"yes"===t.legal,name:"legal",required:!0,disabled:"read"===t.mode}),"YES")),r.a.createElement(p.f,{check:!0},r.a.createElement(p.h,{check:!0},r.a.createElement(p.g,{onChange:a,type:"radio",value:"no",checked:"no"===t.legal,name:"legal",required:!0,disabled:"read"===t.mode}),"NO"))):null}),y=function(e){var t=e.state,a=e.setInput;return"Ford"===t.model?r.a.createElement(r.a.Fragment,null,r.a.createElement(p.f,{className:"mgr"},r.a.createElement(p.h,{for:"color"},"What color is your Ford?"),r.a.createElement(p.g,{onChange:a,type:"text",name:"color",placeholder:"Yout Ford's color",value:t.color,required:!0,disabled:"read"===t.mode})),r.a.createElement(p.f,{className:"mgr"},r.a.createElement(p.h,{for:"wheels"},"How many wheels on your Ford?"),r.a.createElement(p.g,{onChange:a,type:"number",name:"wheels",placeholder:"Number of wheels",value:t.wheels,required:!0,disabled:"read"===t.mode})),r.a.createElement(b,{state:t,setInput:a})):"Toyota"===t.model?r.a.createElement(r.a.Fragment,null,r.a.createElement(p.h,null,"Has your Toyota been recalled?"),r.a.createElement(p.f,{className:"mgr",check:!0},r.a.createElement(p.h,{check:!0},r.a.createElement(p.g,{onChange:a,type:"radio",value:"yes",checked:"yes"===t.recalled,name:"recalled",required:!0,disabled:"read"===t.mode}),"YES")),r.a.createElement(p.f,{check:!0},r.a.createElement(p.h,{check:!0},r.a.createElement(p.g,{onChange:a,type:"radio",value:"no",checked:"no"===t.recalled,name:"recalled",required:!0,disabled:"read"===t.mode}),"NO"))):null},w=function(e){var t=e.state,a=e.setInput;return"yes"===t.ownsCar?r.a.createElement(r.a.Fragment,null,r.a.createElement(p.f,{className:"mgr"},r.a.createElement(p.h,{for:"companyName"},"What is your car's model?"),r.a.createElement(p.g,{disabled:"read"===t.mode,onChange:a,type:"text",name:"model",placeholder:"Car's model",value:t.model,required:!0})),r.a.createElement(y,{state:t,setInput:a})):null},v=function(e){var t=e.state,a=e.setInput,n=e.processSubmit;return r.a.createElement("div",null,r.a.createElement("h5",null,"mode: ",r.a.createElement(p.a,{color:"secondary"},t.mode)),r.a.createElement(p.e,{style:{textAlign:"left"},onSubmit:function(e){return n(e,t.mode)}},r.a.createElement(p.h,null,"Do you own a car?"),r.a.createElement(p.f,{check:!0}," ",r.a.createElement(p.h,{check:!0},r.a.createElement(p.g,{onChange:a,type:"radio",disabled:"read"===t.mode,value:"yes",checked:"yes"===t.ownsCar,name:"ownsCar",required:!0}),"YES")),r.a.createElement(p.f,{check:!0},r.a.createElement(p.h,{check:!0},r.a.createElement(p.g,{onChange:a,type:"radio",disabled:"read"===t.mode,value:"no",checked:"no"===t.ownsCar,name:"ownsCar",required:!0}),"NO")),r.a.createElement(w,{state:t,setInput:a}),r.a.createElement(p.f,{className:"mgr"},r.a.createElement(p.h,{for:"building"},"What year was your building built?"),r.a.createElement(p.g,{onChange:a,type:"number",name:"buildingBuilt",placeholder:"Enter number",value:t.buildingBuilt,required:!0,disabled:"read"===t.mode})),r.a.createElement(p.f,null,r.a.createElement(p.h,{for:"companyName"},"Company name"),r.a.createElement(p.g,{type:"text",name:"companyName",placeholder:"Company name",value:t.companyName,required:!0,disabled:"read"===t.mode,onChange:a})),r.a.createElement("div",{style:{textAlign:"center"}},t.subVis?r.a.createElement(p.b,{color:"primary"},"Submit"):null)))},C=function(e){return e.items>4?r.a.createElement("div",{style:{overflowY:"scroll",border:"1px dotted #eee",maxHeight:"300px",padding:"10px",backgroundColor:"#f6f6f6"}},e.children):r.a.createElement("div",null,e.children)},k=function(e){function t(){return Object(d.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(E,null),r.a.createElement("main",null,r.a.createElement(p.d,{style:{marginTop:"160px"}},r.a.createElement(R.Consumer,null,function(e){return r.a.createElement("div",null,r.a.createElement("h3",null,e[0]," v: ",e[1]),r.a.createElement("h5",null,"store: ",e[2]))}),r.a.createElement(C,{items:this.props.state.list.length},r.a.createElement(g,{state:this.props.state,listManageMethods:this.props.listManageMethods})),this.props.state.formVis?r.a.createElement(v,{setInput:this.props.setInput,state:this.props.state,processSubmit:this.props.processSubmit}):null,r.a.createElement(f,{state:this.props.state,showForm:this.props.showForm}))))}}]),t}(r.a.Component);k.contextType=R;var S=k,x="sky",N=1,D="store",R=r.a.createContext([x,N,D]);"indexedDB"in window||console.log("This browser doesn't support IndexedDB"),function(){var e=(window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB).open(x,N);e.onupgradeneeded=function(){e.result.createObjectStore(D,{autoIncrement:!0})}}();var I=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).getList=function(){var e=indexedDB.open(x,N);e.onsuccess=function(){var t=e.result.transaction(D,"readwrite").objectStore(D).getAllKeys();t.onsuccess=function(){a.setState({list:t.result})}}},a.deleteRecord=function(e){var t=indexedDB.open(x,N);t.onsuccess=function(){var n=t.result.transaction(D,"readwrite").objectStore(D);n.delete(e).onsuccess=function(){var e=n.getAllKeys();e.onsuccess=function(){a.setState({list:e.result}),a.setState(Object(s.a)({addNewVis:1,formVis:0,subVis:1,mode:"none"},a.purgeState()))}}}},a.addRecord=function(e,t){var n={};n.ownsCar=a.state.ownsCar,n.buildingBuilt=a.state.buildingBuilt,n.companyName=a.state.companyName,"yes"===a.state.ownsCar&&(n.model=a.state.model,"Toyota"===a.state.model?n.recalled=a.state.recalled:"Ford"===a.state.model&&(n.color=a.state.color,n.wheels=a.state.wheels,parseInt(a.state.wheels)>4&&(n.legal=a.state.legal)));var r=indexedDB.open(x,N);r.onsuccess=function(){var e=r.result.transaction(D,"readwrite").objectStore(D);("add"===t?e.add(n):e.put(n,a.state.recStore)).onsuccess=function(){alert("RECORD ADDED/UPDATED"),a.setState({formVis:0,addNewVis:1,mode:"none"});var t=e.getAllKeys();t.onsuccess=function(){a.setState({list:t.result})}}}},a.readRecord=function(e,t,n){var r="read"===n?0:1,o=t,l=indexedDB.open(x,N);l.onsuccess=function(){var e=l.result.transaction(D).objectStore(D).get(o);e.onsuccess=function(){alert("RECORD RETRIEVED"),a.setState(Object(s.a)({formVis:1,addNewVis:1,subVis:r,mode:n},e.result))}}},a.purgeState=function(){var e=Object(s.a)({},a.state),t=0;for(var n in e)t>=6&&(e[n]=""),t++;return e},a.showForm=function(e){a.setState(Object(s.a)({formVis:1,addNewVis:0,mode:"add",subVis:1},a.purgeState())),a.setState({mode:"add",subVis:1,addNewVis:0,formVis:1})},a.listManageMethods=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;"Delete"===e.target.innerHTML?a.deleteRecord(t):"Update"===e.target.innerHTML?(a.setState({recStore:t}),a.readRecord(e,t,"update")):(a.setState({recStore:t}),a.readRecord(e,t,"read"))},a.setInput=function(e){a.setState(Object(c.a)({},e.target.name,e.target.value))},a.processSubmit=function(e,t){e.preventDefault(),a.addRecord(e,t)},a.state={recStore:"",list:[],addNewVis:1,formVis:0,subVis:1,mode:"none",ownsCar:"",buildingBuilt:"",companyName:"",model:"",color:"",wheels:"",legal:"",recalled:""},a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.getList()}},{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(S,{state:this.state,mydb:[x,D,N],showForm:this.showForm,readRecord:this.readRecord,updateRecord:this.updateRecord,deleteRecord:this.deleteRecord,createRecord:this.creareRecord,setInput:this.setInput,processSubmit:this.processSubmit,listManageMethods:this.listManageMethods}))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(31);l.a.render(r.a.createElement(I,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[18,2,1]]]);
//# sourceMappingURL=main.0640673f.chunk.js.map